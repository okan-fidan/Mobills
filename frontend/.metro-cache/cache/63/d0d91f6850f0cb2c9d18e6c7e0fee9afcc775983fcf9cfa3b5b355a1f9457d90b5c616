{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":13,"index":128},"end":{"line":7,"column":29,"index":144}}],"key":"XN65eZP/QkNMzaBAXbG/zPyidpY=","exportNames":["*"],"imports":1}},{"name":"react-native-reanimated","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":29,"index":175},"end":{"line":8,"column":63,"index":209}}],"key":"+aUP6OdvebG47hiJSteO076+5ZE=","exportNames":["*"],"imports":1}},{"name":"../constants","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":17,"index":228},"end":{"line":9,"column":40,"index":251}}],"key":"zmjjtqoQxi2W71eIMIIaEi1mOpU=","exportNames":["*"],"imports":1}},{"name":"../utilities/findNodeHandle.web","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":22,"index":275},"end":{"line":10,"column":64,"index":317}}],"key":"vMZ498QzXGQcOhDIL5Wk2CzP2Ac=","exportNames":["*"],"imports":1}},{"name":"./useBottomSheetInternal","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":11,"column":30,"index":349},"end":{"line":11,"column":65,"index":384}}],"key":"2aC0dOcHOcnifpyZ0U9MAYiIMKE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useScrollHandler = void 0;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeReanimated = require(_dependencyMap[1], \"react-native-reanimated\");\n  var _constants = require(_dependencyMap[2], \"../constants\");\n  var _findNodeHandle = require(_dependencyMap[3], \"../utilities/findNodeHandle.web\");\n  var _useBottomSheetInternal = require(_dependencyMap[4], \"./useBottomSheetInternal\");\n  const useScrollHandler = (_, onScroll) => {\n    //#region refs\n    const scrollableRef = (0, _react.useRef)(null);\n    //#endregion\n\n    //#region variables\n    const scrollableContentOffsetY = (0, _reactNativeReanimated.useSharedValue)(0);\n    //#endregion\n\n    //#region hooks\n    const {\n      animatedScrollableState,\n      animatedScrollableStatus,\n      animatedAnimationState\n    } = (0, _useBottomSheetInternal.useBottomSheetInternal)();\n    //#endregion\n\n    //#region effects\n    (0, _react.useEffect)(() => {\n      // biome-ignore lint: to be addressed!\n      const element = (0, _findNodeHandle.findNodeHandle)(scrollableRef.current);\n      let scrollOffset = 0;\n      let supportsPassive = false;\n      let maybePrevent = false;\n      let lastTouchY = 0;\n      let initialContentOffsetY = 0;\n      const shouldLockInitialPosition = false;\n      function handleOnTouchStart(event) {\n        if (event.touches.length !== 1) {\n          return;\n        }\n        initialContentOffsetY = element.scrollTop;\n        lastTouchY = event.touches[0].clientY;\n        maybePrevent = scrollOffset <= 0;\n      }\n      function handleOnTouchMove(event) {\n        if (animatedScrollableStatus.value === _constants.SCROLLABLE_STATUS.LOCKED && event.cancelable) {\n          return event.preventDefault();\n        }\n        if (maybePrevent) {\n          maybePrevent = false;\n          const touchY = event.touches[0].clientY;\n          const touchYDelta = touchY - lastTouchY;\n          if (touchYDelta > 0 && event.cancelable) {\n            return event.preventDefault();\n          }\n        }\n        return true;\n      }\n      function handleOnTouchEnd() {\n        if (animatedScrollableStatus.value === _constants.SCROLLABLE_STATUS.LOCKED) {\n          const lockPosition = shouldLockInitialPosition ? initialContentOffsetY ?? 0 : 0;\n          element.scroll({\n            top: 0,\n            left: 0,\n            behavior: 'instant'\n          });\n          scrollableContentOffsetY.value = lockPosition;\n          return;\n        }\n      }\n      function handleOnScroll(event) {\n        scrollOffset = element.scrollTop;\n        if (animatedAnimationState.get().status !== _constants.ANIMATION_STATUS.RUNNING) {\n          const contentOffsetY = Math.max(0, scrollOffset);\n          scrollableContentOffsetY.value = contentOffsetY;\n          animatedScrollableState.set(state => ({\n            ...state,\n            contentOffsetY\n          }));\n        }\n        if (scrollOffset <= 0 && event.cancelable) {\n          event.preventDefault();\n          event.stopPropagation();\n          return false;\n        }\n        return true;\n      }\n      try {\n        // @ts-ignore\n        window.addEventListener('test', null, {\n          // @ts-ignore\n          // biome-ignore lint: to be addressed\n          get passive() {\n            supportsPassive = true;\n          }\n        });\n      } catch (_e) {}\n      element.addEventListener('touchstart', handleOnTouchStart, supportsPassive ? {\n        passive: true\n      } : false);\n      element.addEventListener('touchmove', handleOnTouchMove, supportsPassive ? {\n        passive: false\n      } : false);\n      element.addEventListener('touchend', handleOnTouchEnd, supportsPassive ? {\n        passive: false\n      } : false);\n      element.addEventListener('scroll', handleOnScroll, supportsPassive ? {\n        passive: false\n      } : false);\n      return () => {\n        // @ts-ignore\n        window.removeEventListener('test', null);\n        element.removeEventListener('touchstart', handleOnTouchStart);\n        element.removeEventListener('touchmove', handleOnTouchMove);\n        element.removeEventListener('touchend', handleOnTouchEnd);\n        element.removeEventListener('scroll', handleOnScroll);\n      };\n    }, [animatedAnimationState, animatedScrollableState, animatedScrollableStatus, scrollableContentOffsetY]);\n    //#endregion\n\n    return {\n      scrollHandler: onScroll,\n      scrollableRef,\n      scrollableContentOffsetY\n    };\n  };\n  exports.useScrollHandler = useScrollHandler;\n});","lineCount":131,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"useScrollHandler"],[7,26,6,24],[7,29,6,27],[7,34,6,32],[7,35,6,33],[8,2,7,0],[8,6,7,4,"_react"],[8,12,7,10],[8,15,7,13,"require"],[8,22,7,20],[8,23,7,20,"_dependencyMap"],[8,37,7,20],[8,49,7,28],[8,50,7,29],[9,2,8,0],[9,6,8,4,"_reactNativeReanimated"],[9,28,8,26],[9,31,8,29,"require"],[9,38,8,36],[9,39,8,36,"_dependencyMap"],[9,53,8,36],[9,83,8,62],[9,84,8,63],[10,2,9,0],[10,6,9,4,"_constants"],[10,16,9,14],[10,19,9,17,"require"],[10,26,9,24],[10,27,9,24,"_dependencyMap"],[10,41,9,24],[10,60,9,39],[10,61,9,40],[11,2,10,0],[11,6,10,4,"_findNodeHandle"],[11,21,10,19],[11,24,10,22,"require"],[11,31,10,29],[11,32,10,29,"_dependencyMap"],[11,46,10,29],[11,84,10,63],[11,85,10,64],[12,2,11,0],[12,6,11,4,"_useBottomSheetInternal"],[12,29,11,27],[12,32,11,30,"require"],[12,39,11,37],[12,40,11,37,"_dependencyMap"],[12,54,11,37],[12,85,11,64],[12,86,11,65],[13,2,12,0],[13,8,12,6,"useScrollHandler"],[13,24,12,22],[13,27,12,25,"useScrollHandler"],[13,28,12,26,"_"],[13,29,12,27],[13,31,12,29,"onScroll"],[13,39,12,37],[13,44,12,42],[14,4,13,2],[15,4,14,2],[15,10,14,8,"scrollableRef"],[15,23,14,21],[15,26,14,24],[15,27,14,25],[15,28,14,26],[15,30,14,28,"_react"],[15,36,14,34],[15,37,14,35,"useRef"],[15,43,14,41],[15,45,14,43],[15,49,14,47],[15,50,14,48],[16,4,15,2],[18,4,17,2],[19,4,18,2],[19,10,18,8,"scrollableContentOffsetY"],[19,34,18,32],[19,37,18,35],[19,38,18,36],[19,39,18,37],[19,41,18,39,"_reactNativeReanimated"],[19,63,18,61],[19,64,18,62,"useSharedValue"],[19,78,18,76],[19,80,18,78],[19,81,18,79],[19,82,18,80],[20,4,19,2],[22,4,21,2],[23,4,22,2],[23,10,22,8],[24,6,23,4,"animatedScrollableState"],[24,29,23,27],[25,6,24,4,"animatedScrollableStatus"],[25,30,24,28],[26,6,25,4,"animatedAnimationState"],[27,4,26,2],[27,5,26,3],[27,8,26,6],[27,9,26,7],[27,10,26,8],[27,12,26,10,"_useBottomSheetInternal"],[27,35,26,33],[27,36,26,34,"useBottomSheetInternal"],[27,58,26,56],[27,60,26,58],[27,61,26,59],[28,4,27,2],[30,4,29,2],[31,4,30,2],[31,5,30,3],[31,6,30,4],[31,8,30,6,"_react"],[31,14,30,12],[31,15,30,13,"useEffect"],[31,24,30,22],[31,26,30,24],[31,32,30,30],[32,6,31,4],[33,6,32,4],[33,12,32,10,"element"],[33,19,32,17],[33,22,32,20],[33,23,32,21],[33,24,32,22],[33,26,32,24,"_findNodeHandle"],[33,41,32,39],[33,42,32,40,"findNodeHandle"],[33,56,32,54],[33,58,32,56,"scrollableRef"],[33,71,32,69],[33,72,32,70,"current"],[33,79,32,77],[33,80,32,78],[34,6,33,4],[34,10,33,8,"scrollOffset"],[34,22,33,20],[34,25,33,23],[34,26,33,24],[35,6,34,4],[35,10,34,8,"supportsPassive"],[35,25,34,23],[35,28,34,26],[35,33,34,31],[36,6,35,4],[36,10,35,8,"maybePrevent"],[36,22,35,20],[36,25,35,23],[36,30,35,28],[37,6,36,4],[37,10,36,8,"lastTouchY"],[37,20,36,18],[37,23,36,21],[37,24,36,22],[38,6,37,4],[38,10,37,8,"initialContentOffsetY"],[38,31,37,29],[38,34,37,32],[38,35,37,33],[39,6,38,4],[39,12,38,10,"shouldLockInitialPosition"],[39,37,38,35],[39,40,38,38],[39,45,38,43],[40,6,39,4],[40,15,39,13,"handleOnTouchStart"],[40,33,39,31,"handleOnTouchStart"],[40,34,39,32,"event"],[40,39,39,37],[40,41,39,39],[41,8,40,6],[41,12,40,10,"event"],[41,17,40,15],[41,18,40,16,"touches"],[41,25,40,23],[41,26,40,24,"length"],[41,32,40,30],[41,37,40,35],[41,38,40,36],[41,40,40,38],[42,10,41,8],[43,8,42,6],[44,8,43,6,"initialContentOffsetY"],[44,29,43,27],[44,32,43,30,"element"],[44,39,43,37],[44,40,43,38,"scrollTop"],[44,49,43,47],[45,8,44,6,"lastTouchY"],[45,18,44,16],[45,21,44,19,"event"],[45,26,44,24],[45,27,44,25,"touches"],[45,34,44,32],[45,35,44,33],[45,36,44,34],[45,37,44,35],[45,38,44,36,"clientY"],[45,45,44,43],[46,8,45,6,"maybePrevent"],[46,20,45,18],[46,23,45,21,"scrollOffset"],[46,35,45,33],[46,39,45,37],[46,40,45,38],[47,6,46,4],[48,6,47,4],[48,15,47,13,"handleOnTouchMove"],[48,32,47,30,"handleOnTouchMove"],[48,33,47,31,"event"],[48,38,47,36],[48,40,47,38],[49,8,48,6],[49,12,48,10,"animatedScrollableStatus"],[49,36,48,34],[49,37,48,35,"value"],[49,42,48,40],[49,47,48,45,"_constants"],[49,57,48,55],[49,58,48,56,"SCROLLABLE_STATUS"],[49,75,48,73],[49,76,48,74,"LOCKED"],[49,82,48,80],[49,86,48,84,"event"],[49,91,48,89],[49,92,48,90,"cancelable"],[49,102,48,100],[49,104,48,102],[50,10,49,8],[50,17,49,15,"event"],[50,22,49,20],[50,23,49,21,"preventDefault"],[50,37,49,35],[50,38,49,36],[50,39,49,37],[51,8,50,6],[52,8,51,6],[52,12,51,10,"maybePrevent"],[52,24,51,22],[52,26,51,24],[53,10,52,8,"maybePrevent"],[53,22,52,20],[53,25,52,23],[53,30,52,28],[54,10,53,8],[54,16,53,14,"touchY"],[54,22,53,20],[54,25,53,23,"event"],[54,30,53,28],[54,31,53,29,"touches"],[54,38,53,36],[54,39,53,37],[54,40,53,38],[54,41,53,39],[54,42,53,40,"clientY"],[54,49,53,47],[55,10,54,8],[55,16,54,14,"touchYDelta"],[55,27,54,25],[55,30,54,28,"touchY"],[55,36,54,34],[55,39,54,37,"lastTouchY"],[55,49,54,47],[56,10,55,8],[56,14,55,12,"touchYDelta"],[56,25,55,23],[56,28,55,26],[56,29,55,27],[56,33,55,31,"event"],[56,38,55,36],[56,39,55,37,"cancelable"],[56,49,55,47],[56,51,55,49],[57,12,56,10],[57,19,56,17,"event"],[57,24,56,22],[57,25,56,23,"preventDefault"],[57,39,56,37],[57,40,56,38],[57,41,56,39],[58,10,57,8],[59,8,58,6],[60,8,59,6],[60,15,59,13],[60,19,59,17],[61,6,60,4],[62,6,61,4],[62,15,61,13,"handleOnTouchEnd"],[62,31,61,29,"handleOnTouchEnd"],[62,32,61,29],[62,34,61,32],[63,8,62,6],[63,12,62,10,"animatedScrollableStatus"],[63,36,62,34],[63,37,62,35,"value"],[63,42,62,40],[63,47,62,45,"_constants"],[63,57,62,55],[63,58,62,56,"SCROLLABLE_STATUS"],[63,75,62,73],[63,76,62,74,"LOCKED"],[63,82,62,80],[63,84,62,82],[64,10,63,8],[64,16,63,14,"lockPosition"],[64,28,63,26],[64,31,63,29,"shouldLockInitialPosition"],[64,56,63,54],[64,59,63,57,"initialContentOffsetY"],[64,80,63,78],[64,84,63,82],[64,85,63,83],[64,88,63,86],[64,89,63,87],[65,10,64,8,"element"],[65,17,64,15],[65,18,64,16,"scroll"],[65,24,64,22],[65,25,64,23],[66,12,65,10,"top"],[66,15,65,13],[66,17,65,15],[66,18,65,16],[67,12,66,10,"left"],[67,16,66,14],[67,18,66,16],[67,19,66,17],[68,12,67,10,"behavior"],[68,20,67,18],[68,22,67,20],[69,10,68,8],[69,11,68,9],[69,12,68,10],[70,10,69,8,"scrollableContentOffsetY"],[70,34,69,32],[70,35,69,33,"value"],[70,40,69,38],[70,43,69,41,"lockPosition"],[70,55,69,53],[71,10,70,8],[72,8,71,6],[73,6,72,4],[74,6,73,4],[74,15,73,13,"handleOnScroll"],[74,29,73,27,"handleOnScroll"],[74,30,73,28,"event"],[74,35,73,33],[74,37,73,35],[75,8,74,6,"scrollOffset"],[75,20,74,18],[75,23,74,21,"element"],[75,30,74,28],[75,31,74,29,"scrollTop"],[75,40,74,38],[76,8,75,6],[76,12,75,10,"animatedAnimationState"],[76,34,75,32],[76,35,75,33,"get"],[76,38,75,36],[76,39,75,37],[76,40,75,38],[76,41,75,39,"status"],[76,47,75,45],[76,52,75,50,"_constants"],[76,62,75,60],[76,63,75,61,"ANIMATION_STATUS"],[76,79,75,77],[76,80,75,78,"RUNNING"],[76,87,75,85],[76,89,75,87],[77,10,76,8],[77,16,76,14,"contentOffsetY"],[77,30,76,28],[77,33,76,31,"Math"],[77,37,76,35],[77,38,76,36,"max"],[77,41,76,39],[77,42,76,40],[77,43,76,41],[77,45,76,43,"scrollOffset"],[77,57,76,55],[77,58,76,56],[78,10,77,8,"scrollableContentOffsetY"],[78,34,77,32],[78,35,77,33,"value"],[78,40,77,38],[78,43,77,41,"contentOffsetY"],[78,57,77,55],[79,10,78,8,"animatedScrollableState"],[79,33,78,31],[79,34,78,32,"set"],[79,37,78,35],[79,38,78,36,"state"],[79,43,78,41],[79,48,78,46],[80,12,79,10],[80,15,79,13,"state"],[80,20,79,18],[81,12,80,10,"contentOffsetY"],[82,10,81,8],[82,11,81,9],[82,12,81,10],[82,13,81,11],[83,8,82,6],[84,8,83,6],[84,12,83,10,"scrollOffset"],[84,24,83,22],[84,28,83,26],[84,29,83,27],[84,33,83,31,"event"],[84,38,83,36],[84,39,83,37,"cancelable"],[84,49,83,47],[84,51,83,49],[85,10,84,8,"event"],[85,15,84,13],[85,16,84,14,"preventDefault"],[85,30,84,28],[85,31,84,29],[85,32,84,30],[86,10,85,8,"event"],[86,15,85,13],[86,16,85,14,"stopPropagation"],[86,31,85,29],[86,32,85,30],[86,33,85,31],[87,10,86,8],[87,17,86,15],[87,22,86,20],[88,8,87,6],[89,8,88,6],[89,15,88,13],[89,19,88,17],[90,6,89,4],[91,6,90,4],[91,10,90,8],[92,8,91,6],[93,8,92,6,"window"],[93,14,92,12],[93,15,92,13,"addEventListener"],[93,31,92,29],[93,32,92,30],[93,38,92,36],[93,40,92,38],[93,44,92,42],[93,46,92,44],[94,10,93,8],[95,10,94,8],[96,10,95,8],[96,14,95,12,"passive"],[96,21,95,19,"passive"],[96,22,95,19],[96,24,95,22],[97,12,96,10,"supportsPassive"],[97,27,96,25],[97,30,96,28],[97,34,96,32],[98,10,97,8],[99,8,98,6],[99,9,98,7],[99,10,98,8],[100,6,99,4],[100,7,99,5],[100,8,99,6],[100,15,99,13,"_e"],[100,17,99,15],[100,19,99,17],[100,20,99,18],[101,6,100,4,"element"],[101,13,100,11],[101,14,100,12,"addEventListener"],[101,30,100,28],[101,31,100,29],[101,43,100,41],[101,45,100,43,"handleOnTouchStart"],[101,63,100,61],[101,65,100,63,"supportsPassive"],[101,80,100,78],[101,83,100,81],[102,8,101,6,"passive"],[102,15,101,13],[102,17,101,15],[103,6,102,4],[103,7,102,5],[103,10,102,8],[103,15,102,13],[103,16,102,14],[104,6,103,4,"element"],[104,13,103,11],[104,14,103,12,"addEventListener"],[104,30,103,28],[104,31,103,29],[104,42,103,40],[104,44,103,42,"handleOnTouchMove"],[104,61,103,59],[104,63,103,61,"supportsPassive"],[104,78,103,76],[104,81,103,79],[105,8,104,6,"passive"],[105,15,104,13],[105,17,104,15],[106,6,105,4],[106,7,105,5],[106,10,105,8],[106,15,105,13],[106,16,105,14],[107,6,106,4,"element"],[107,13,106,11],[107,14,106,12,"addEventListener"],[107,30,106,28],[107,31,106,29],[107,41,106,39],[107,43,106,41,"handleOnTouchEnd"],[107,59,106,57],[107,61,106,59,"supportsPassive"],[107,76,106,74],[107,79,106,77],[108,8,107,6,"passive"],[108,15,107,13],[108,17,107,15],[109,6,108,4],[109,7,108,5],[109,10,108,8],[109,15,108,13],[109,16,108,14],[110,6,109,4,"element"],[110,13,109,11],[110,14,109,12,"addEventListener"],[110,30,109,28],[110,31,109,29],[110,39,109,37],[110,41,109,39,"handleOnScroll"],[110,55,109,53],[110,57,109,55,"supportsPassive"],[110,72,109,70],[110,75,109,73],[111,8,110,6,"passive"],[111,15,110,13],[111,17,110,15],[112,6,111,4],[112,7,111,5],[112,10,111,8],[112,15,111,13],[112,16,111,14],[113,6,112,4],[113,13,112,11],[113,19,112,17],[114,8,113,6],[115,8,114,6,"window"],[115,14,114,12],[115,15,114,13,"removeEventListener"],[115,34,114,32],[115,35,114,33],[115,41,114,39],[115,43,114,41],[115,47,114,45],[115,48,114,46],[116,8,115,6,"element"],[116,15,115,13],[116,16,115,14,"removeEventListener"],[116,35,115,33],[116,36,115,34],[116,48,115,46],[116,50,115,48,"handleOnTouchStart"],[116,68,115,66],[116,69,115,67],[117,8,116,6,"element"],[117,15,116,13],[117,16,116,14,"removeEventListener"],[117,35,116,33],[117,36,116,34],[117,47,116,45],[117,49,116,47,"handleOnTouchMove"],[117,66,116,64],[117,67,116,65],[118,8,117,6,"element"],[118,15,117,13],[118,16,117,14,"removeEventListener"],[118,35,117,33],[118,36,117,34],[118,46,117,44],[118,48,117,46,"handleOnTouchEnd"],[118,64,117,62],[118,65,117,63],[119,8,118,6,"element"],[119,15,118,13],[119,16,118,14,"removeEventListener"],[119,35,118,33],[119,36,118,34],[119,44,118,42],[119,46,118,44,"handleOnScroll"],[119,60,118,58],[119,61,118,59],[120,6,119,4],[120,7,119,5],[121,4,120,2],[121,5,120,3],[121,7,120,5],[121,8,120,6,"animatedAnimationState"],[121,30,120,28],[121,32,120,30,"animatedScrollableState"],[121,55,120,53],[121,57,120,55,"animatedScrollableStatus"],[121,81,120,79],[121,83,120,81,"scrollableContentOffsetY"],[121,107,120,105],[121,108,120,106],[121,109,120,107],[122,4,121,2],[124,4,123,2],[124,11,123,9],[125,6,124,4,"scrollHandler"],[125,19,124,17],[125,21,124,19,"onScroll"],[125,29,124,27],[126,6,125,4,"scrollableRef"],[126,19,125,17],[127,6,126,4,"scrollableContentOffsetY"],[128,4,127,2],[128,5,127,3],[129,2,128,0],[129,3,128,1],[130,2,129,0,"exports"],[130,9,129,7],[130,10,129,8,"useScrollHandler"],[130,26,129,24],[130,29,129,27,"useScrollHandler"],[130,45,129,43],[131,0,129,44],[131,3]],"functionMap":{"names":["<global>","useScrollHandler","<anonymous>","handleOnTouchStart","handleOnTouchMove","handleOnTouchEnd","handleOnScroll","animatedScrollableState.set$argument_0","window.addEventListener$argument_2.get__passive"],"mappings":"AAA;yBCW;wBCkB;ICS;KDO;IEC;KFa;IGC;KHW;IIC;oCCK;UDG;KJQ;QMM;SNE;GDuB;CDQ"},"hasCjsExports":true},"type":"js/module"}]}