{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":42,"index":57}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-reanimated","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":58},"end":{"line":4,"column":57,"index":115}}],"key":"bo7uvEY9Xm8UmqPDTWhyayJ74mM=","exportNames":["*"],"imports":1}},{"name":"../constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":116},"end":{"line":5,"column":67,"index":183}}],"key":"eTOOXVNPpMK2U8dOAmBWjbEJ4yE=","exportNames":["*"],"imports":1}},{"name":"../utilities/findNodeHandle.web","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":184},"end":{"line":6,"column":65,"index":249}}],"key":"CxPiue1c6zcQiXwz/rnBvQg1d0I=","exportNames":["*"],"imports":1}},{"name":"./useBottomSheetInternal","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":250},"end":{"line":7,"column":66,"index":316}}],"key":"S/QFR9ofBdMQ57FkEfpqdA29dwE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useScrollHandler\", {\n    enumerable: true,\n    get: function () {\n      return useScrollHandler;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeReanimated = require(_dependencyMap[1], \"react-native-reanimated\");\n  var _constants = require(_dependencyMap[2], \"../constants\");\n  var _utilitiesFindNodeHandleWeb = require(_dependencyMap[3], \"../utilities/findNodeHandle.web\");\n  var _useBottomSheetInternal = require(_dependencyMap[4], \"./useBottomSheetInternal\");\n  const useScrollHandler = (_, onScroll) => {\n    //#region refs\n    const scrollableRef = (0, _react.useRef)(null);\n    //#endregion\n\n    //#region variables\n    const scrollableContentOffsetY = (0, _reactNativeReanimated.useSharedValue)(0);\n    //#endregion\n\n    //#region hooks\n    const {\n      animatedScrollableState,\n      animatedScrollableStatus,\n      animatedAnimationState\n    } = (0, _useBottomSheetInternal.useBottomSheetInternal)();\n    //#endregion\n\n    //#region effects\n    (0, _react.useEffect)(() => {\n      // biome-ignore lint: to be addressed!\n      const element = (0, _utilitiesFindNodeHandleWeb.findNodeHandle)(scrollableRef.current);\n      let scrollOffset = 0;\n      let supportsPassive = false;\n      let maybePrevent = false;\n      let lastTouchY = 0;\n      let initialContentOffsetY = 0;\n      const shouldLockInitialPosition = false;\n      function handleOnTouchStart(event) {\n        if (event.touches.length !== 1) {\n          return;\n        }\n        initialContentOffsetY = element.scrollTop;\n        lastTouchY = event.touches[0].clientY;\n        maybePrevent = scrollOffset <= 0;\n      }\n      function handleOnTouchMove(event) {\n        if (animatedScrollableStatus.value === _constants.SCROLLABLE_STATUS.LOCKED && event.cancelable) {\n          return event.preventDefault();\n        }\n        if (maybePrevent) {\n          maybePrevent = false;\n          const touchY = event.touches[0].clientY;\n          const touchYDelta = touchY - lastTouchY;\n          if (touchYDelta > 0 && event.cancelable) {\n            return event.preventDefault();\n          }\n        }\n        return true;\n      }\n      function handleOnTouchEnd() {\n        if (animatedScrollableStatus.value === _constants.SCROLLABLE_STATUS.LOCKED) {\n          const lockPosition = shouldLockInitialPosition ? initialContentOffsetY ?? 0 : 0;\n          element.scroll({\n            top: 0,\n            left: 0,\n            behavior: 'instant'\n          });\n          scrollableContentOffsetY.value = lockPosition;\n          return;\n        }\n      }\n      function handleOnScroll(event) {\n        scrollOffset = element.scrollTop;\n        if (animatedAnimationState.get().status !== _constants.ANIMATION_STATUS.RUNNING) {\n          const contentOffsetY = Math.max(0, scrollOffset);\n          scrollableContentOffsetY.value = contentOffsetY;\n          animatedScrollableState.set(state => ({\n            ...state,\n            contentOffsetY\n          }));\n        }\n        if (scrollOffset <= 0 && event.cancelable) {\n          event.preventDefault();\n          event.stopPropagation();\n          return false;\n        }\n        return true;\n      }\n      try {\n        // @ts-ignore\n        window.addEventListener('test', null, {\n          // @ts-ignore\n          // biome-ignore lint: to be addressed\n          get passive() {\n            supportsPassive = true;\n          }\n        });\n      } catch (_e) {}\n      element.addEventListener('touchstart', handleOnTouchStart, supportsPassive ? {\n        passive: true\n      } : false);\n      element.addEventListener('touchmove', handleOnTouchMove, supportsPassive ? {\n        passive: false\n      } : false);\n      element.addEventListener('touchend', handleOnTouchEnd, supportsPassive ? {\n        passive: false\n      } : false);\n      element.addEventListener('scroll', handleOnScroll, supportsPassive ? {\n        passive: false\n      } : false);\n      return () => {\n        // @ts-ignore\n        window.removeEventListener('test', null);\n        element.removeEventListener('touchstart', handleOnTouchStart);\n        element.removeEventListener('touchmove', handleOnTouchMove);\n        element.removeEventListener('touchend', handleOnTouchEnd);\n        element.removeEventListener('scroll', handleOnScroll);\n      };\n    }, [animatedAnimationState, animatedScrollableState, animatedScrollableStatus, scrollableContentOffsetY]);\n    //#endregion\n\n    return {\n      scrollHandler: onScroll,\n      scrollableRef,\n      scrollableContentOffsetY\n    };\n  };\n});","lineCount":135,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,8,0,"Object"],[7,8,8,0],[7,9,8,0,"defineProperty"],[7,23,8,0],[7,24,8,0,"exports"],[7,31,8,0],[8,4,8,0,"enumerable"],[8,14,8,0],[9,4,8,0,"get"],[9,7,8,0],[9,18,8,0,"get"],[9,19,8,0],[10,6,8,0],[10,13,8,0,"useScrollHandler"],[10,29,8,0],[11,4,8,0],[12,2,8,0],[13,2,3,0],[13,6,3,0,"_react"],[13,12,3,0],[13,15,3,0,"require"],[13,22,3,0],[13,23,3,0,"_dependencyMap"],[13,37,3,0],[14,2,4,0],[14,6,4,0,"_reactNativeReanimated"],[14,28,4,0],[14,31,4,0,"require"],[14,38,4,0],[14,39,4,0,"_dependencyMap"],[14,53,4,0],[15,2,5,0],[15,6,5,0,"_constants"],[15,16,5,0],[15,19,5,0,"require"],[15,26,5,0],[15,27,5,0,"_dependencyMap"],[15,41,5,0],[16,2,6,0],[16,6,6,0,"_utilitiesFindNodeHandleWeb"],[16,33,6,0],[16,36,6,0,"require"],[16,43,6,0],[16,44,6,0,"_dependencyMap"],[16,58,6,0],[17,2,7,0],[17,6,7,0,"_useBottomSheetInternal"],[17,29,7,0],[17,32,7,0,"require"],[17,39,7,0],[17,40,7,0,"_dependencyMap"],[17,54,7,0],[18,2,8,7],[18,8,8,13,"useScrollHandler"],[18,24,8,29],[18,27,8,32,"useScrollHandler"],[18,28,8,33,"_"],[18,29,8,34],[18,31,8,36,"onScroll"],[18,39,8,44],[18,44,8,49],[19,4,9,2],[20,4,10,2],[20,10,10,8,"scrollableRef"],[20,23,10,21],[20,26,10,24],[20,30,10,24,"useRef"],[20,36,10,30],[20,37,10,30,"useRef"],[20,43,10,30],[20,45,10,31],[20,49,10,35],[20,50,10,36],[21,4,11,2],[23,4,13,2],[24,4,14,2],[24,10,14,8,"scrollableContentOffsetY"],[24,34,14,32],[24,37,14,35],[24,41,14,35,"useSharedValue"],[24,63,14,49],[24,64,14,49,"useSharedValue"],[24,78,14,49],[24,80,14,50],[24,81,14,51],[24,82,14,52],[25,4,15,2],[27,4,17,2],[28,4,18,2],[28,10,18,8],[29,6,19,4,"animatedScrollableState"],[29,29,19,27],[30,6,20,4,"animatedScrollableStatus"],[30,30,20,28],[31,6,21,4,"animatedAnimationState"],[32,4,22,2],[32,5,22,3],[32,8,22,6],[32,12,22,6,"useBottomSheetInternal"],[32,35,22,28],[32,36,22,28,"useBottomSheetInternal"],[32,58,22,28],[32,60,22,29],[32,61,22,30],[33,4,23,2],[35,4,25,2],[36,4,26,2],[36,8,26,2,"useEffect"],[36,14,26,11],[36,15,26,11,"useEffect"],[36,24,26,11],[36,26,26,12],[36,32,26,18],[37,6,27,4],[38,6,28,4],[38,12,28,10,"element"],[38,19,28,17],[38,22,28,20],[38,26,28,20,"findNodeHandle"],[38,53,28,34],[38,54,28,34,"findNodeHandle"],[38,68,28,34],[38,70,28,35,"scrollableRef"],[38,83,28,48],[38,84,28,49,"current"],[38,91,28,56],[38,92,28,57],[39,6,29,4],[39,10,29,8,"scrollOffset"],[39,22,29,20],[39,25,29,23],[39,26,29,24],[40,6,30,4],[40,10,30,8,"supportsPassive"],[40,25,30,23],[40,28,30,26],[40,33,30,31],[41,6,31,4],[41,10,31,8,"maybePrevent"],[41,22,31,20],[41,25,31,23],[41,30,31,28],[42,6,32,4],[42,10,32,8,"lastTouchY"],[42,20,32,18],[42,23,32,21],[42,24,32,22],[43,6,33,4],[43,10,33,8,"initialContentOffsetY"],[43,31,33,29],[43,34,33,32],[43,35,33,33],[44,6,34,4],[44,12,34,10,"shouldLockInitialPosition"],[44,37,34,35],[44,40,34,38],[44,45,34,43],[45,6,35,4],[45,15,35,13,"handleOnTouchStart"],[45,33,35,31,"handleOnTouchStart"],[45,34,35,32,"event"],[45,39,35,37],[45,41,35,39],[46,8,36,6],[46,12,36,10,"event"],[46,17,36,15],[46,18,36,16,"touches"],[46,25,36,23],[46,26,36,24,"length"],[46,32,36,30],[46,37,36,35],[46,38,36,36],[46,40,36,38],[47,10,37,8],[48,8,38,6],[49,8,39,6,"initialContentOffsetY"],[49,29,39,27],[49,32,39,30,"element"],[49,39,39,37],[49,40,39,38,"scrollTop"],[49,49,39,47],[50,8,40,6,"lastTouchY"],[50,18,40,16],[50,21,40,19,"event"],[50,26,40,24],[50,27,40,25,"touches"],[50,34,40,32],[50,35,40,33],[50,36,40,34],[50,37,40,35],[50,38,40,36,"clientY"],[50,45,40,43],[51,8,41,6,"maybePrevent"],[51,20,41,18],[51,23,41,21,"scrollOffset"],[51,35,41,33],[51,39,41,37],[51,40,41,38],[52,6,42,4],[53,6,43,4],[53,15,43,13,"handleOnTouchMove"],[53,32,43,30,"handleOnTouchMove"],[53,33,43,31,"event"],[53,38,43,36],[53,40,43,38],[54,8,44,6],[54,12,44,10,"animatedScrollableStatus"],[54,36,44,34],[54,37,44,35,"value"],[54,42,44,40],[54,47,44,45,"SCROLLABLE_STATUS"],[54,57,44,62],[54,58,44,62,"SCROLLABLE_STATUS"],[54,75,44,62],[54,76,44,63,"LOCKED"],[54,82,44,69],[54,86,44,73,"event"],[54,91,44,78],[54,92,44,79,"cancelable"],[54,102,44,89],[54,104,44,91],[55,10,45,8],[55,17,45,15,"event"],[55,22,45,20],[55,23,45,21,"preventDefault"],[55,37,45,35],[55,38,45,36],[55,39,45,37],[56,8,46,6],[57,8,47,6],[57,12,47,10,"maybePrevent"],[57,24,47,22],[57,26,47,24],[58,10,48,8,"maybePrevent"],[58,22,48,20],[58,25,48,23],[58,30,48,28],[59,10,49,8],[59,16,49,14,"touchY"],[59,22,49,20],[59,25,49,23,"event"],[59,30,49,28],[59,31,49,29,"touches"],[59,38,49,36],[59,39,49,37],[59,40,49,38],[59,41,49,39],[59,42,49,40,"clientY"],[59,49,49,47],[60,10,50,8],[60,16,50,14,"touchYDelta"],[60,27,50,25],[60,30,50,28,"touchY"],[60,36,50,34],[60,39,50,37,"lastTouchY"],[60,49,50,47],[61,10,51,8],[61,14,51,12,"touchYDelta"],[61,25,51,23],[61,28,51,26],[61,29,51,27],[61,33,51,31,"event"],[61,38,51,36],[61,39,51,37,"cancelable"],[61,49,51,47],[61,51,51,49],[62,12,52,10],[62,19,52,17,"event"],[62,24,52,22],[62,25,52,23,"preventDefault"],[62,39,52,37],[62,40,52,38],[62,41,52,39],[63,10,53,8],[64,8,54,6],[65,8,55,6],[65,15,55,13],[65,19,55,17],[66,6,56,4],[67,6,57,4],[67,15,57,13,"handleOnTouchEnd"],[67,31,57,29,"handleOnTouchEnd"],[67,32,57,29],[67,34,57,32],[68,8,58,6],[68,12,58,10,"animatedScrollableStatus"],[68,36,58,34],[68,37,58,35,"value"],[68,42,58,40],[68,47,58,45,"SCROLLABLE_STATUS"],[68,57,58,62],[68,58,58,62,"SCROLLABLE_STATUS"],[68,75,58,62],[68,76,58,63,"LOCKED"],[68,82,58,69],[68,84,58,71],[69,10,59,8],[69,16,59,14,"lockPosition"],[69,28,59,26],[69,31,59,29,"shouldLockInitialPosition"],[69,56,59,54],[69,59,59,57,"initialContentOffsetY"],[69,80,59,78],[69,84,59,82],[69,85,59,83],[69,88,59,86],[69,89,59,87],[70,10,60,8,"element"],[70,17,60,15],[70,18,60,16,"scroll"],[70,24,60,22],[70,25,60,23],[71,12,61,10,"top"],[71,15,61,13],[71,17,61,15],[71,18,61,16],[72,12,62,10,"left"],[72,16,62,14],[72,18,62,16],[72,19,62,17],[73,12,63,10,"behavior"],[73,20,63,18],[73,22,63,20],[74,10,64,8],[74,11,64,9],[74,12,64,10],[75,10,65,8,"scrollableContentOffsetY"],[75,34,65,32],[75,35,65,33,"value"],[75,40,65,38],[75,43,65,41,"lockPosition"],[75,55,65,53],[76,10,66,8],[77,8,67,6],[78,6,68,4],[79,6,69,4],[79,15,69,13,"handleOnScroll"],[79,29,69,27,"handleOnScroll"],[79,30,69,28,"event"],[79,35,69,33],[79,37,69,35],[80,8,70,6,"scrollOffset"],[80,20,70,18],[80,23,70,21,"element"],[80,30,70,28],[80,31,70,29,"scrollTop"],[80,40,70,38],[81,8,71,6],[81,12,71,10,"animatedAnimationState"],[81,34,71,32],[81,35,71,33,"get"],[81,38,71,36],[81,39,71,37],[81,40,71,38],[81,41,71,39,"status"],[81,47,71,45],[81,52,71,50,"ANIMATION_STATUS"],[81,62,71,66],[81,63,71,66,"ANIMATION_STATUS"],[81,79,71,66],[81,80,71,67,"RUNNING"],[81,87,71,74],[81,89,71,76],[82,10,72,8],[82,16,72,14,"contentOffsetY"],[82,30,72,28],[82,33,72,31,"Math"],[82,37,72,35],[82,38,72,36,"max"],[82,41,72,39],[82,42,72,40],[82,43,72,41],[82,45,72,43,"scrollOffset"],[82,57,72,55],[82,58,72,56],[83,10,73,8,"scrollableContentOffsetY"],[83,34,73,32],[83,35,73,33,"value"],[83,40,73,38],[83,43,73,41,"contentOffsetY"],[83,57,73,55],[84,10,74,8,"animatedScrollableState"],[84,33,74,31],[84,34,74,32,"set"],[84,37,74,35],[84,38,74,36,"state"],[84,43,74,41],[84,48,74,46],[85,12,75,10],[85,15,75,13,"state"],[85,20,75,18],[86,12,76,10,"contentOffsetY"],[87,10,77,8],[87,11,77,9],[87,12,77,10],[87,13,77,11],[88,8,78,6],[89,8,79,6],[89,12,79,10,"scrollOffset"],[89,24,79,22],[89,28,79,26],[89,29,79,27],[89,33,79,31,"event"],[89,38,79,36],[89,39,79,37,"cancelable"],[89,49,79,47],[89,51,79,49],[90,10,80,8,"event"],[90,15,80,13],[90,16,80,14,"preventDefault"],[90,30,80,28],[90,31,80,29],[90,32,80,30],[91,10,81,8,"event"],[91,15,81,13],[91,16,81,14,"stopPropagation"],[91,31,81,29],[91,32,81,30],[91,33,81,31],[92,10,82,8],[92,17,82,15],[92,22,82,20],[93,8,83,6],[94,8,84,6],[94,15,84,13],[94,19,84,17],[95,6,85,4],[96,6,86,4],[96,10,86,8],[97,8,87,6],[98,8,88,6,"window"],[98,14,88,12],[98,15,88,13,"addEventListener"],[98,31,88,29],[98,32,88,30],[98,38,88,36],[98,40,88,38],[98,44,88,42],[98,46,88,44],[99,10,89,8],[100,10,90,8],[101,10,91,8],[101,14,91,12,"passive"],[101,21,91,19,"passive"],[101,22,91,19],[101,24,91,22],[102,12,92,10,"supportsPassive"],[102,27,92,25],[102,30,92,28],[102,34,92,32],[103,10,93,8],[104,8,94,6],[104,9,94,7],[104,10,94,8],[105,6,95,4],[105,7,95,5],[105,8,95,6],[105,15,95,13,"_e"],[105,17,95,15],[105,19,95,17],[105,20,95,18],[106,6,96,4,"element"],[106,13,96,11],[106,14,96,12,"addEventListener"],[106,30,96,28],[106,31,96,29],[106,43,96,41],[106,45,96,43,"handleOnTouchStart"],[106,63,96,61],[106,65,96,63,"supportsPassive"],[106,80,96,78],[106,83,96,81],[107,8,97,6,"passive"],[107,15,97,13],[107,17,97,15],[108,6,98,4],[108,7,98,5],[108,10,98,8],[108,15,98,13],[108,16,98,14],[109,6,99,4,"element"],[109,13,99,11],[109,14,99,12,"addEventListener"],[109,30,99,28],[109,31,99,29],[109,42,99,40],[109,44,99,42,"handleOnTouchMove"],[109,61,99,59],[109,63,99,61,"supportsPassive"],[109,78,99,76],[109,81,99,79],[110,8,100,6,"passive"],[110,15,100,13],[110,17,100,15],[111,6,101,4],[111,7,101,5],[111,10,101,8],[111,15,101,13],[111,16,101,14],[112,6,102,4,"element"],[112,13,102,11],[112,14,102,12,"addEventListener"],[112,30,102,28],[112,31,102,29],[112,41,102,39],[112,43,102,41,"handleOnTouchEnd"],[112,59,102,57],[112,61,102,59,"supportsPassive"],[112,76,102,74],[112,79,102,77],[113,8,103,6,"passive"],[113,15,103,13],[113,17,103,15],[114,6,104,4],[114,7,104,5],[114,10,104,8],[114,15,104,13],[114,16,104,14],[115,6,105,4,"element"],[115,13,105,11],[115,14,105,12,"addEventListener"],[115,30,105,28],[115,31,105,29],[115,39,105,37],[115,41,105,39,"handleOnScroll"],[115,55,105,53],[115,57,105,55,"supportsPassive"],[115,72,105,70],[115,75,105,73],[116,8,106,6,"passive"],[116,15,106,13],[116,17,106,15],[117,6,107,4],[117,7,107,5],[117,10,107,8],[117,15,107,13],[117,16,107,14],[118,6,108,4],[118,13,108,11],[118,19,108,17],[119,8,109,6],[120,8,110,6,"window"],[120,14,110,12],[120,15,110,13,"removeEventListener"],[120,34,110,32],[120,35,110,33],[120,41,110,39],[120,43,110,41],[120,47,110,45],[120,48,110,46],[121,8,111,6,"element"],[121,15,111,13],[121,16,111,14,"removeEventListener"],[121,35,111,33],[121,36,111,34],[121,48,111,46],[121,50,111,48,"handleOnTouchStart"],[121,68,111,66],[121,69,111,67],[122,8,112,6,"element"],[122,15,112,13],[122,16,112,14,"removeEventListener"],[122,35,112,33],[122,36,112,34],[122,47,112,45],[122,49,112,47,"handleOnTouchMove"],[122,66,112,64],[122,67,112,65],[123,8,113,6,"element"],[123,15,113,13],[123,16,113,14,"removeEventListener"],[123,35,113,33],[123,36,113,34],[123,46,113,44],[123,48,113,46,"handleOnTouchEnd"],[123,64,113,62],[123,65,113,63],[124,8,114,6,"element"],[124,15,114,13],[124,16,114,14,"removeEventListener"],[124,35,114,33],[124,36,114,34],[124,44,114,42],[124,46,114,44,"handleOnScroll"],[124,60,114,58],[124,61,114,59],[125,6,115,4],[125,7,115,5],[126,4,116,2],[126,5,116,3],[126,7,116,5],[126,8,116,6,"animatedAnimationState"],[126,30,116,28],[126,32,116,30,"animatedScrollableState"],[126,55,116,53],[126,57,116,55,"animatedScrollableStatus"],[126,81,116,79],[126,83,116,81,"scrollableContentOffsetY"],[126,107,116,105],[126,108,116,106],[126,109,116,107],[127,4,117,2],[129,4,119,2],[129,11,119,9],[130,6,120,4,"scrollHandler"],[130,19,120,17],[130,21,120,19,"onScroll"],[130,29,120,27],[131,6,121,4,"scrollableRef"],[131,19,121,17],[132,6,122,4,"scrollableContentOffsetY"],[133,4,123,2],[133,5,123,3],[134,2,124,0],[134,3,124,1],[135,0,124,2],[135,3]],"functionMap":{"names":["<global>","useScrollHandler","useEffect$argument_0","handleOnTouchStart","handleOnTouchMove","handleOnTouchEnd","handleOnScroll","animatedScrollableState.set$argument_0","window.addEventListener$argument_2.get__passive","<anonymous>"],"mappings":"AAA;gCCO;YCkB;ICS;KDO;IEC;KFa;IGC;KHW;IIC;oCCK;UDG;KJQ;QMM;SNE;WOe;KPO;GDC;CDQ"},"hasCjsExports":false},"type":"js/module"}]}